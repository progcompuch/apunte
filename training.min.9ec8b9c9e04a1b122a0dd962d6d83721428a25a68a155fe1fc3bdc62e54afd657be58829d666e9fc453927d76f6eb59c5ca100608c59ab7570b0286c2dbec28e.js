const path=window.location.pathname,trainingNames=[["Búsqueda Binaria / Dos Punteros","Grafos: BFS / DFS / Dijkstra / DSU","Programación Dinámica","Estructuras de Datos"],["Grafos 2: Minimum Spanning Tree / Camino más corto","Teoría de números / Conteo","Programación Dinámica 2","Estructuras de Datos 2","algoritmo de mo"],["Grafos 3: Flujo y matchings","Binary Lifting","Small to Large","Técnicas en árboles 1","Teoría de juegos"],["Estructuras de Datos 3","Teoría de números 2","Probabilistas","Sistemas de ecuaciones lineales"]],trainingContents=[[["Búsqueda Binaria","Dos Punteros"],["BFS","DFS","Dijkstra","DSU"],["Programación Dinámica"],["Segment Tree (normal)"]],[["Algoritmo de Kruskal","Bellman Ford","Floyd Warshall"],["Aritmética Modular","Criba de Eratóstenes","Inverso Modular","Números Binomiales"],["Programación Dinámica","sqrt decomposition"],["Segment Tree (Lazy)"],["algoritmo de mo","algoritmo de mo 3d"]],[["maxflow","mincut","hungarian"],["binary lifting"],["small to large"],["binary lifting","small to large","rerooting","dfs tree"],["sprague grundy"]],[["segment tree persistente","segment tree dinamico"],["tests de primalidad","funciones multiplicativas","inversa de mobius","función phi de euler"],["probabilidades"],["Método de Gauss"]]],contests_ids=[["567665","567946","567947","568427"],["585432","585434","585435","585436","585438"],["585583","585587","585588","585590","585591"],["585593","585595","585598","585600"]];let users=[{nickname:"dariasc",codeforcesId:"dariasc",codeforcesRating:1689,atcoderRating:1336},{nickname:"vivivi",codeforcesId:"vivivi",codeforcesRating:1612,atcoderRating:0},{nickname:"m1tu",codeforcesId:"m1tu",codeforcesRating:1486,atcoderRating:399},{nickname:"MapacheTactico",codeforcesId:"MapacheTactico",codeforcesRating:1172,atcoderRating:347},{nickname:"ElNChou",codeforcesId:"ElNChou",codeforcesRating:1349,atcoderRating:562},{nickname:"ilopez15",codeforcesId:"ilopez15",codeforcesRating:1254,atcoderRating:207},{nickname:"ant_metayer",codeforcesId:"ant_metayer",codeforcesRating:643,atcoderRating:0},{nickname:"AlePatata92",codeforcesId:"AlePatata92",codeforcesRating:935,atcoderRating:35},{nickname:"lu_0",codeforcesId:"lu_0",codeforcesRating:728,atcoderRating:0},{nickname:"patrici4",codeforcesId:"patrici4",codeforcesRating:0,atcoderRating:0},{nickname:"curauma03",codeforcesId:"curauma03",codeforcesRating:1046,atcoderRating:0},{nickname:"elJunaeb",codeforcesId:"elJunaeb",codeforcesRating:875,atcoderRating:0},{nickname:"Pansho721",codeforcesId:"Pansho721",codeforcesRating:912,atcoderRating:0},{nickname:"ThisIsThisAndThatIsThat",codeforcesId:"ThisIsThisAndThatIsThat",codeforcesRating:1015,atcoderRating:44},{nickname:"pauwu",codeforcesId:"pauwu",codeforcesRating:379,atcoderRating:0}],complete_users_list=["JOliva","Marinkovic","Blaz","dariasc","vivivi","m1tu","AngrySeal","PathToMaster","MapacheTactico","ElNChou","ilopez15","ant_metayer","AlePatata92","lu_0","patrici4","svandich","Jayki","curauma03","elJunaeb","daridius","Pansho721","ThisIsThisAndThatIsThat","pauwu","Ciruela","davicom","lazyelekid","Zertex"];function getObjectSize(e){return new Blob([JSON.stringify(e)]).size+" bytes"}async function generateApiSig(e,t,n,s){const o=Math.random().toString(36).substring(2,8),i=Math.floor(Date.now()/1e3),a=Object.keys(t).sort().map(e=>`${e}=${t[e]}`).join("&"),r=`${o}/${e}?apiKey=${n}&${a}&time=${i}#${s}`,c=await crypto.subtle.digest("SHA-512",(new TextEncoder).encode(r)),l=Array.from(new Uint8Array(c)),d=l.map(e=>e.toString(16).padStart(2,"0")).join("");return{apiSig:`${o}${d}`,time:i}}async function fetchContestStatus(e,t,n,s,o,i){const c="contest.status",l={contestId:e,from:t,count:n,asManager:s},{apiSig:d,time:u}=await generateApiSig(c,l,o,i),h=`https://codeforces.com/api/${c}?apiKey=${o}&asManager=${s}&contestId=${e}&count=${n}&from=${t}&time=${u}&apiSig=${d}`,a=await fetch(h);if(!a.ok)return console.error("Error fetching contest status:",a.statusText),[];const r=await a.json();return r.status!=="OK"?(console.error("API returned an error:",r.comment),[]):r.result}async function fetchContestStandings(e,t,n){const a=!0,r=1,c=100,l=!0;participantTypes="PRACTICE";const d="contest.standings";let u=complete_users_list.join;const h={contestId:e,from:r,count:c,asManager:a,showUnofficial:l,participantTypes};u=complete_users_list.join(";");const{apiSig:m,time:f}=await generateApiSig(d,h,t,n),p=`https://codeforces.com/api/${d}?apiKey=${t}&asManager=${a}&contestId=${e}&count=${c}&from=${r}&participantTypes=${participantTypes}&showUnofficial=${l}&time=${f}&apiSig=${m}`,o=await fetch(p);if(await new Promise(e=>setTimeout(e,1e3)),!o.ok)return console.error("Error fetching contest standings:",o.statusText),[];const i=await o.json();return i.status!=="OK"?(console.error("API returned an error:",i.comment),[]):i.result}async function loadData(e,t){for(let i=0;i<trainingNames[t].length;i++){const h=document.getElementById(`tab-content-${i}`);if(!h){console.error(`Tab content ${i} not found.`);return}const r=h.querySelector("div table");if(!r){console.error(`Table not found in tab ${i}.`);return}const m=contests_ids[t][i];contest_data=e[m],problem_list=contest_data[0];let c=r.getElementsByTagName("tr")[0],o=c.children;if(o.length==0){let e=document.createElement("td");e.textContent="—",c.appendChild(e)}let n={},d={};for(let e=0;e<users.length;e++)n[users[e].codeforcesId]={crating:users[e].codeforcesRating,arating:users[e].atcoderRating},d[users[e].codeforcesId]={crating:users[e].codeforcesRating,arating:users[e].atcoderRating};let s=0;for(let e=0;e<contest_data[1].length;e++)if(user_handle=contest_data[1][e].handle,user_handle in n){if(o.length<=s+1){let e=document.createElement("td");e.textContent="—",c.appendChild(e)}o[s+1].style.fontWeight="bold";let t=n[user_handle].crating,i=n[user_handle].arating,e="";t<800&&i<200?e="rating-black":t<=1199&&i<=399?e="rating-gray":t<=1399&&i<=799?e="rating-green":t<=1599&&i<=1299?e="rating-cyan":t<=1899&&i<=1699?e="rating-blue":t<=2099&&i<=1999?e="rating-purple":t<=2399&&i<=2299?e="rating-orange":t<=2999&&i<=2999&&(e="rating-red"),o[s+1].innerHTML=`<span class="${e}">${user_handle}</span>`,delete n[user_handle],s+=1}for(const[r,a]of Object.entries(n)){if(o.length<=s+1){let e=document.createElement("td");e.textContent="—",c.appendChild(e)}o[s+1].style.fontWeight="bold";let t=a.crating,i=a.arating,e="";t<800&&i<200?e="rating-black":t<=1199&&i<=399?e="rating-gray":t<=1399&&i<=799?e="rating-green":t<=1599&&i<=1299?e="rating-cyan":t<=1899&&i<=1699?e="rating-blue":t<=2099&&i<=1999?e="rating-purple":t<=2399&&i<=2299?e="rating-orange":t<=2999&&i<=2999&&(e="rating-red"),o[s+1].innerHTML=`<span class="${e}">${r}</span>`,s+=1}const u=r.insertRow(),a=u.insertCell(0);a.style.position="sticky",a.style.left="0",a.style.backgroundColor="#f8f9fa",a.textContent="Totales",a.style.fontWeight="bold";let l=0;for(let e=0;e<contest_data[1].length;e++)if(user_handle=contest_data[1][e].handle,user_handle in d){const n=u.insertCell(l+1);let t=0;for(let n=0;n<contest_data[1][e].solves.length;n++)contest_data[1][e].solves[n]==2&&(t+=1);n.textContent=t,l++}for(const[t,s]of Object.entries(n)){const e=u.insertCell(l+1);e.textContent=0,l+=1}for(let e=0;e<problem_list.length;e++){const i=r.insertRow(),t=i.insertCell(0);t.style.position="sticky",t.style.left="0",t.style.backgroundColor="#f8f9fa",t.style.fontWeight="bold";const s=document.createElement("a");s.href=problem_list[e].url,s.textContent=problem_list[e].name,s.target="_blank",s.rel="noopener noreferrer",t.appendChild(s);let o=0;for(let t=0;t<contest_data[1].length;t++)if(user_handle=contest_data[1][t].handle,user_handle in d){const s=i.insertCell(o+1);let n=contest_data[1][t].solves[e],a=n==2?"accepted":n==1?"attempted":"notAttempted";s.className=`task-score ${a}`,o++}for(const[t,s]of Object.entries(n)){const e=i.insertCell(o+1);e.className=`task-score notAttemped`,o+=1}}}}function setcache(){return[{data:{},expires:0},{data:{},expires:0},{data:{},expires:0},{data:{},expires:0},{data:{},expires:0}]}async function populateTables(e,t){const r=document.getElementById("gym-tab-content");if(!r){console.error("Tables container not found!");return}const c=path.split("/"),l=c.filter(e=>e!=="").pop(),d=l.replace(/\D/g,"");_lvlindxpath=parseInt(d)-1;const u=trainingNames[_lvlindxpath],h=trainingContents[_lvlindxpath],s=document.getElementById("gym-tabs"),o=document.getElementById("gym-tab-content");s.innerHTML="",o.innerHTML="",u.forEach((e,t)=>{const i=document.createElement("li");i.classList.add("nav-item"),i.innerHTML=`
            <button class="nav-link ${t===0?"active":""}" id="tab-${t}"
                data-bs-toggle="tab" data-bs-target="#tab-content-${t}" type="button" role="tab"
                aria-controls="tab-content-${t}" aria-selected="${t===0}">
                ${e}
            </button>`,s.appendChild(i);const n=document.createElement("div");n.classList.add("tab-pane","fade"),t===0&&n.classList.add("show","active"),n.id=`tab-content-${t}`,n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",`tab-${t}`);let a="<h3>Contenidos</h3>";h[t].forEach(e=>{a+=`<span>${e}</span><br/>`}),a+=`
        <div style="overflow-x: auto;">
          <table class="table table-sm table-bordered cses-table" style="table-layout: auto; width: 100%;">
            <thead>
              <tr>
                <th style="position: sticky; left: 0; background-color: #f8f9fa; z-index: 1;">User</th>
              </tr>
            </thead>
            <tbody id="table-body-${t}"></tbody>
          </table>
        </div>
        `,n.innerHTML=a,o.appendChild(n)});let n=localStorage.getItem("gymCache");n!==null?n=JSON.parse(n):n=setcache(),Array.isArray(n)||(n=setcache());let i=new Date;if(n[_lvlindxpath].expires<i.getTime()){n[_lvlindxpath].data=[];for(let s=0;s<contests_ids[_lvlindxpath].length;s++){const o=contests_ids[_lvlindxpath][s],i=await Promise.resolve(fetchContestStandings(o,e,t,_lvlindxpath));i&&(standings_rows=i.rows,standings_problems=i.problems,data_rows=[],problem_names=[],standings_problems.forEach((e)=>{problem_names.push({name:e.name,url:"https://codeforces.com/gym/"+o+"/problem/"+e.index})}),standings_rows.forEach((e)=>{srow_handle=e.party.members[0].handle,srow_results=e.problemResults,results_data=[],srow_results.forEach((e)=>{results_data.push(e.points>0?2:e.rejectedAttemptCount>0?1:0)}),data_rows.push({handle:srow_handle,solves:results_data})}),n[_lvlindxpath].data[o]=[problem_names,data_rows])}n[_lvlindxpath].expires=i.getTime()+300*1e3,loadData(n[_lvlindxpath].data,_lvlindxpath)}else loadData(n[_lvlindxpath].data,_lvlindxpath);let a=document.getElementById("loading");a&&(a.style.display="none")}populateTables("e23005a4a475b6079a98c6c75f9d24408033ece7","d6c254ba481a12d0370517c93e2f4a2a5595586e")