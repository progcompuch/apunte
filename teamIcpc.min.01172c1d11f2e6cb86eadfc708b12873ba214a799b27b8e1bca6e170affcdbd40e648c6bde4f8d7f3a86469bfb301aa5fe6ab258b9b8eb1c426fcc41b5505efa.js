const RATING_COLOR_ORDER=["rating-black","rating-gray","rating-green","rating-cyan","rating-blue","rating-purple","rating-orange","rating-red"];function applyFilters(){const e=document.getElementById("filter-femeligible").checked,t=document.querySelectorAll("#teamsIcpc-tbody tr");t.forEach(t=>{const n=t.classList.contains("fem-eligible");t.style.display=e&&!n?"none":"table-row"})}function getBestColorClass(e){const t=[];return typeof e.codeforcesRating=="number"&&t.push(getCodeforcesRatingClass(e.codeforcesRating)),typeof e.atcoderRating=="number"&&t.push(getAtcoderRatingClass(e.atcoderRating)),t.length===0?"rating-black":t.reduce((e,t)=>RATING_COLOR_ORDER.indexOf(t)>RATING_COLOR_ORDER.indexOf(e)?t:e,"rating-black")}function updateTeamTable(e){const t=document.getElementById("teamsIcpc-tbody");t.innerHTML="",e.forEach(e=>{const n=document.createElement("tr");n.setAttribute("data-university",e.organization.toLowerCase()),e.fem&&n.classList.add("fem-eligible"),n.classList.add("icpc-eligible");const s=e.members.map(e=>{const t=getBestColorClass(e);return`<span class="${t}">${e.nickname}</span>`}).join(' <span style="color:#888;">+</span> ');n.innerHTML=`
            <td><span class="team-name">${e.name}</span></td>
            <td><img src="/images/universities/${e.organization}.png" class="university-logo"></td>
            <td>${s}</td>
        `,t.appendChild(n)})}async function populateTeams(){try{const e=await fetch("https://joliva.cl/api/teams");if(!e.ok)throw new Error("Failed to fetch teams");let t=(await e.json()).result;t.sort((e,t)=>{const n=e.organization.localeCompare(t.organization);return n!==0?n:e.name.localeCompare(t.name)}),document.getElementById("filter-femeligible").addEventListener("change",applyFilters),updateTeamTable(t),applyFilters()}catch(e){console.error("Error fetching teams:",e)}}function createTableRow(e,t,n,s,o,i){const a=document.createElement("tr");return a.setAttribute("data-university",s.toLowerCase()),i&&a.classList.add("icpc-eligible"),o&&a.classList.add("fem-eligible"),a.innerHTML=`
        <td><span class="${getRatingClass(n,t)}">${e}</span></td>
        <td><img src="/images/universities/${s}.png" class="university-logo"></td>
        <td><span class="${getRatingClass(n,t)}">${t}</span></td>
    `,{nickname:e,rating:t,row:a}}function clearTable(e){const t=document.getElementById(e);if(!t){console.warn(`Table ID '${e}' not found!`);return}for(;t.children.length>1;)t.removeChild(t.lastChild)}function sortAndRenderTable(e,t){const n=document.getElementById(e);if(!n){console.warn(`Table '${e}' not found!`);return}t.sort((e,t)=>t.rating-e.rating),t.forEach(e=>{e.row&&n.appendChild(e.row)})}function getRatingClass(e,t){return e==="codeforces"?getCodeforcesRatingClass(t):e==="atcoder"?getAtcoderRatingClass(t):e==="leetcode"?getLeetcodeRatingClass(t):e==="codechef"?getCodechefRatingClass(t):e==="luogu"?getLuoguRatingClass(t):""}function getCodeforcesRatingClass(e){return e<800?"rating-black":e<1200?"rating-gray":e<1400?"rating-green":e<1600?"rating-cyan":e<1900?"rating-blue":e<2100?"rating-purple":e<2400?"rating-orange":"rating-red"}function getAtcoderRatingClass(e){return e<200?"rating-black":e<400?"rating-gray":e<900?"rating-green":e<1400?"rating-cyan":e<1700?"rating-blue":e<2e3?"rating-purple":e<2400?"rating-orange":"rating-red"}function getLeetcodeRatingClass(e){return e<800?"rating-black":e<1400?"rating-gray":e<1600?"rating-green":e<1900?"rating-cyan":e<2100?"rating-blue":e<2400?"rating-purple":e<2900?"rating-orange":"rating-red"}function getCodechefRatingClass(e){return e<1e3?"rating-black":e<1200?"rating-gray":e<1500?"rating-green":e<1700?"rating-cyan":e<1900?"rating-blue":e<2200?"rating-purple":e<2600?"rating-orange":"rating-red"}function getLuoguRatingClass(e){return e<200?"rating-black":e<600?"rating-gray":e<900?"rating-green":e<1100?"rating-cyan":e<1400?"rating-blue":e<1700?"rating-purple":e<2100?"rating-orange":"rating-red"}populateTeams()